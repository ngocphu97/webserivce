<div class="display-center mat-elevation-z4 data-table">
	<div *ngIf="pending">
		<mat-progress-bar mode="query"></mat-progress-bar>
	</div>

	<div class="action">
		<mat-form-field class="filter-field">
			<input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
		</mat-form-field>

		<div class="add-product" fxLayout="row" fxLayoutAlign="end">
			<a routerLink="./add-book" mat-raised-button color="primary">Add book</a>
		</div>
	</div>

	<div style="overflow-x:auto; overflow-y: hidden">
		<table mat-table matSort [dataSource]="dataSource" class="table">

			<ng-container matColumnDef="select">
				<th mat-header-cell *matHeaderCellDef>
					<mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
						[indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
					</mat-checkbox>
				</th>
				<td mat-cell *matCellDef="let row">
					<mat-checkbox (click)="stopPropagation($event)" (change)="$event ? selection.toggle(row) : null"
						[checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
					</mat-checkbox>
				</td>
			</ng-container>

			<ng-container matColumnDef="name">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Book </th>
				<td mat-cell *matCellDef="let element"> {{element.name | slice:0:40}} </td>
			</ng-container>

			<ng-container matColumnDef="image">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> <span style="white-space: pre;">Image</span>
				</th>
				<td mat-cell *matCellDef="let element"> <img class="book-image" src="{{element.image}}" alt=""> </td>
			</ng-container>

			<ng-container matColumnDef="author">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Author </th>
				<td mat-cell *matCellDef="let element">
					<span>{{element.author}} </span>
				</td>
			</ng-container>

			<ng-container matColumnDef="translator">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Translator </th>
				<td mat-cell *matCellDef="let element">
					<span>{{element.translator}} </span>
				</td>
			</ng-container>

			<ng-container matColumnDef="language">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Language </th>
				<td mat-cell *matCellDef="let element">
					<span>{{element.language}} </span>
				</td>
			</ng-container>

			<ng-container matColumnDef="retailPrice">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Retail price </th>
				<td mat-cell *matCellDef="let element">
					<span>{{element.retailPrice}} </span>
				</td>
			</ng-container>

			<ng-container matColumnDef="cost">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Cost </th>
				<td mat-cell *matCellDef="let element">
					<span>{{element.cost}} </span>
				</td>
			</ng-container>

			<ng-container matColumnDef="inventory">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Inventory </th>
				<td mat-cell *matCellDef="let element">
					<span>{{element.inventory}} </span>
				</td>
			</ng-container>

			<ng-container matColumnDef="amount">
				<th mat-header-cell *matHeaderCellDef mat-sort-header> Amount </th>
				<td mat-cell *matCellDef="let element">
					<span>{{element.amount}} </span>
				</td>
			</ng-container>

			<ng-container matColumnDef="action">
				<th mat-header-cell *matHeaderCellDef> Action </th>
				<td mat-cell *matCellDef="let element">
					<a mat-raised-button color="primary" routerLink="./{{element.id}}">Detail</a>
				</td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="displayedColumns" class="table-head"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns;" class="row" (click)="selectRow(row)"></tr>
		</table>
	</div>

	<mat-paginator [pageSizeOptions]="[10, 20, 50]" showFirstLastButtons></mat-paginator>
</div>